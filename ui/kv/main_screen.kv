<MainScreen>:
    name: "main"
    tasks_container: tasks_container

    canvas.before:
        Color:
            rgba: 0.97, 0.98, 0.99, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        padding: [dp(24), dp(24)]
        spacing: dp(28)

        # Верхняя панель
        BoxLayout:
            size_hint_y: None
            height: dp(52)
            spacing: dp(16)

            Label:
                text: "Сегодня"
                font_size: "28sp"
                bold: True
                color: 0.12, 0.18, 0.3, 1
                halign: "left"
                valign: "middle"
                text_size: self.size

            Widget:

        # Кнопки действий
        BoxLayout:
            size_hint_y: None
            height: dp(52)
            spacing: dp(14)

            Button:
                text: "НОВАЯ ЗАДАЧА"
                font_size: "14sp"
                bold: True
                background_color: 0, 0, 0, 0
                background_normal: ""
                color: 1, 1, 1, 1
                on_press: root._go_to_task_editor()
                canvas.before:
                    Color:
                        rgba: 0.25, 0.65, 0.95, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(16)]
                    Color:
                        rgba: 0.18, 0.55, 0.85, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(16)]
                        width: 2

            Button:
                text: "КАЛЕНДАРЬ"
                font_size: "14sp"
                background_color: 0, 0, 0, 0
                background_normal: ""
                color: 0.5, 0.5, 0.6, 1
                on_press: root._go_to_calendar()
                canvas.before:
                    Color:
                        rgba: 0.97, 0.98, 0.99, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(16)]
                    Color:
                        rgba: 0.85, 0.88, 0.92, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(16)]
                        width: 1.8

            Button:
                text: "СТАТИСТИКА"
                font_size: "14sp"
                background_color: 0, 0, 0, 0
                background_normal: ""
                color: 0.5, 0.5, 0.6, 1
                on_press: root._go_to_statistics()
                canvas.before:
                    Color:
                        rgba: 0.97, 0.98, 0.99, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(16)]
                    Color:
                        rgba: 0.85, 0.88, 0.92, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(16)]
                        width: 1.8

        # Список задач
        ScrollView:
            do_scroll_x: False
            bar_color: 0.25, 0.65, 0.95, 0.7
            bar_width: dp(5)
            bar_inactive_color: 0.25, 0.65, 0.95, 0.3
            scroll_type: ['bars', 'content']
            effect_cls: "ScrollEffect"

            BoxLayout:
                id: tasks_container
                orientation: "vertical"
                size_hint_y: None
                spacing: 0
                padding: [dp(6), dp(10), dp(6), dp(25)]
                height: self.minimum_height