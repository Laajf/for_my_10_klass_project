<MainScreen>:
    name: "main"
    tasks_container: tasks_container

    canvas.before:
        Color:
            rgba: 0.98, 0.98, 0.98, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        padding: [dp(20), dp(20)]
        spacing: dp(24)

        # Верхняя панель
        BoxLayout:
            size_hint_y: None
            height: dp(48)
            spacing: dp(16)

            Label:
                text: "Сегодня"
                font_size: "32sp"
                bold: True
                color: 0.1, 0.1, 0.1, 1
                halign: "left"
                valign: "middle"
                text_size: self.size

            Widget:

        # Кнопки действий
        BoxLayout:
            size_hint_y: None
            height: dp(48)
            spacing: dp(12)

            Button:
                text: "+ Новая задача"
                font_size: "15sp"
                bold: True
                background_color: 0.2, 0.6, 1, 1
                background_normal: ""
                color: 1, 1, 1, 1
                on_press: root._go_to_task_editor()
                canvas.before:
                    Color:
                        rgba: 0.2, 0.6, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(24)]

            Button:
                text: "Календарь"
                font_size: "15sp"
                background_color: 0.95, 0.95, 0.95, 1
                background_normal: ""
                color: 0.3, 0.3, 0.3, 1
                on_press: root._go_to_calendar()
                canvas.before:
                    Color:
                        rgba: 0.95, 0.95, 0.95, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(24)]

            Button:
                text: "Статистика"
                font_size: "15sp"
                background_color: 0.95, 0.95, 0.95, 1
                background_normal: ""
                color: 0.3, 0.3, 0.3, 1
                on_press: root._go_to_statistics()
                canvas.before:
                    Color:
                        rgba: 0.95, 0.95, 0.95, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(24)]

        # Список задач
        ScrollView:
            do_scroll_x: False
            bar_color: 0.2, 0.6, 1, 0.6
            bar_width: dp(4)
            bar_inactive_color: 0.2, 0.6, 1, 0.3
            scroll_type: ['bars', 'content']
            effect_cls: "ScrollEffect"

            BoxLayout:
                id: tasks_container
                orientation: "vertical"
                size_hint_y: None
                spacing: 0
                padding: [dp(4), dp(8), dp(4), dp(20)]
                height: self.minimum_height